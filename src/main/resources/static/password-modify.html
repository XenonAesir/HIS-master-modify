<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <!-- Meta Tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="keywords" content="Site keywords here">
    <meta name="description" content="">
    <meta name='copyright' content=''>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Title -->
    <title></title>

    <!-- Favicon -->
    <link rel="icon" href="img/favicon.png">

    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Poppins:200i,300,300i,400,400i,500,500i,600,600i,700,700i,800,800i,900,900i&display=swap"
        rel="stylesheet">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <!-- Nice Select CSS -->
    <link rel="stylesheet" href="css/nice-select.css">
    <!-- Font Awesome CSS -->
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <!-- icofont CSS -->
    <link rel="stylesheet" href="css/icofont.css">
    <!-- Slicknav -->
    <link rel="stylesheet" href="css/slicknav.min.css">
    <!-- Owl Carousel CSS -->
    <link rel="stylesheet" href="css/owl-carousel.css">
    <!-- Datepicker CSS -->
    <link rel="stylesheet" href="css/datepicker.css">
    <!-- Animate CSS -->
    <link rel="stylesheet" href="css/animate.min.css">
    <!-- Magnific Popup CSS -->
    <link rel="stylesheet" href="css/magnific-popup.css">

    <!-- Medipro CSS -->
    <link rel="stylesheet" href="css/normalize.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="css/responsive.css">

    <!-- Color CSS -->
    <link rel="stylesheet" href="css/color/color1.css">
    <!--<link rel="stylesheet" href="css/color/color2.css">-->
    <!--<link rel="stylesheet" href="css/color/color3.css">-->
    <!--<link rel="stylesheet" href="css/color/color4.css">-->
    <!--<link rel="stylesheet" href="css/color/color5.css">-->
    <!--<link rel="stylesheet" href="css/color/color6.css">-->
    <!--<link rel="stylesheet" href="css/color/color7.css">-->
    <!--<link rel="stylesheet" href="css/color/color8.css">-->
    <!--<link rel="stylesheet" href="css/color/color9.css">-->
    <!--<link rel="stylesheet" href="css/color/color10.css">-->
    <!--<link rel="stylesheet" href="css/color/color11.css">-->
    <!--<link rel="stylesheet" href="css/color/color12.css">-->

    <link rel="stylesheet" href="#" id="colors">

</head>

<body>
    <!-- Header Area -->
    <header class="header style2">

        <!-- Middle Header -->
        <div class="middle-header">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-3 col-12">
                        <!-- Start Logo -->
                        <div class="logo">
                            <a href="index2.html"><img src="img/logo.png" alt="#"></a>
                        </div>
                        <!-- End Logo -->
                        <!-- Mobile Nav -->
                        <div class="mobile-nav"></div>
                        <!-- End Mobile Nav -->
                    </div>
                    <div class="col-lg-9 col-md-9 col-12">
                        <div class="widget-main">
                            <!-- Single Widget -->
                            <div class="single-widget">
                                <i class="icofont-ui-call"></i>
                                <p>电话</p>
                                <h4>0311-85917000</h4>
                            </div>
                            <!--/ End Single Widget -->
                            <!-- Single Widget -->
                            <div class="single-widget">
                                <i class="icofont-location-pin"></i>
                                <p>地址</p>
                                <h4>石家庄市裕华区东岗路89号</h4>
                            </div>
                            <!--/ End Single Widget -->
                            <!-- Single Widget -->
                            <!-- <div class="single-widget button">
								<div class="get-quote">
									<a href="appointment.html" class="btn">我的预约记录</a>
								</div>
							</div> -->
                            <!--/ End Single Widget -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Middle Header -->
        <!-- Header Inner -->
        <div class="header-inner">
            <div class="container">
                <div class="inner">
                    <div class="row">
                        <div class="col-12">
                            <!-- Main Menu -->
                            <div class="main-menu" style="float: left;">
                                <nav class="navigation">
                                    <ul class="nav menu">
                                        <li><a href="index2.html">首页</a></li>
                                        <!--										<li><a href="#">医院介绍</a></li>-->
                                        <!--										<li><a href="#">科室简介</a></li>-->
                                        <!--										<li><a href="#">专家教授</a></li>-->
                                        <!--										<li><a href="#">联系我们</a></li>-->
                                        <li><a href="#">员工入口</a></li>
                                    </ul>
                                </nav>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!--/ End Header Inner -->
    </header>
    <!-- End Header Area -->


    <!-- Shop Register -->
    <section class="register section" style="margin-top: -60px;">
        <div class="container">
            <div class="inner">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="register-left">

                        </div>
                    </div>
                    <div class="col-lg-6">
                        <div class="register-form">
                            <h2>修改新密码</h2>
                            <p style="margin-bottom: 0;">请牢记您的密码，您的身份信息将显示在下面的文本框：</p>
                            <!-- Form -->
                            <form name="passwordfindform" class="form" method="post" style="margin-top: 3%;">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <input type="text" id="patientIdentity" name="patientIdentity"
                                                placeholder="身份证号" required="">
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <input type="password" id="password1" name="password1" placeholder="密码"
                                                required="" onblur="check()">
                                            <span id="tishi"></span></input>
                                        </div>
                                    </div>
                                    <div class="col-lg-12">
                                        <div class="form-group">
                                            <input type="password" id="password2" name="password2" placeholder="确认密码"
                                                required="" onkeyup="check()" />
                                        </div>
                                    </div>

                                    <div class="col-12">
                                        <div class="form-group login-btn">
                                            <button id="button" class="btn" type="button"
                                                onclick="confirming()">确认信息</button>
                                        </div>
                                        <!-- <div class="checkbox">
											<label class="checkbox-inline" for="2"><input name="news" id="2"
													type="checkbox">是的，我同意所有</label>
										</div>
										<a href="#" class="terms">条款和条件</a> -->
                                    </div>
                                </div>
                            </form>
                            <!--/ End Form -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!--/ End Register -->

    <!-- jquery Min JS -->
    <script src="js/jquery.min.js"></script>
    <!-- jquery Migrate JS -->
    <script src="js/jquery-migrate-3.0.0.js"></script>
    <!-- jquery Ui JS -->
    <script src="js/jquery-ui.min.js"></script>
    <!-- Easing JS -->
    <script src="js/easing.js"></script>
    <!-- Color JS -->
    <script src="js/colors.js"></script>
    <!-- Popper JS -->
    <script src="js/popper.min.js"></script>
    <!-- Bootstrap Datepicker JS -->
    <script src="js/bootstrap-datepicker.js"></script>
    <!-- Jquery Nav JS -->
    <script src="js/jquery.nav.js"></script>
    <!-- Slicknav JS -->
    <script src="js/slicknav.min.js"></script>
    <!-- ScrollUp JS -->
    <script src="js/jquery.scrollUp.min.js"></script>
    <!-- Niceselect JS -->
    <script src="js/niceselect.js"></script>
    <!-- Tilt Jquery JS -->
    <script src="js/tilt.jquery.min.js"></script>
    <!-- Owl Carousel JS -->
    <script src="js/owl-carousel.js"></script>
    <!-- counterup JS -->
    <script src="js/jquery.counterup.min.js"></script>
    <!-- Steller JS -->
    <script src="js/steller.js"></script>
    <!-- Wow JS -->
    <script src="js/wow.min.js"></script>
    <!-- Magnific Popup JS -->
    <script src="js/jquery.magnific-popup.min.js"></script>
    <!-- Counter Up CDN JS -->
    <script src="js/waypoints.min.js"></script>
    <!-- Bootstrap JS -->
    <script src="js/bootstrap.min.js"></script>
    <!-- Main JS -->
    <script src="js/main.js"></script>
    <script type="text/javascript">

        // 当页面加载完成时执行操作
        window.onload = function () {
            // 从sessionStorage中获取用户身份证
            var userid = sessionStorage.getItem('tempID');

            // 将用户名填充到第一个输入框中
            var patientIdentityInput = document.getElementById('patientIdentity');
            if (patientIdentityInput) {
                patientIdentityInput.value = userid;
                patientIdentityInput.readOnly = true; // 设置为只读
            }
        };


        function check() {
            var password = document.getElementsByName("password1")[0].value;
            var repassword = document.getElementsByName("password2")[0].value;
            if (password == "") {
                document.getElementById("tishi").innerHTML = "<br><font color='green'>请输入密码</font>";
                document.getElementById("button").disabled = true;
            }
            else if (repassword == "") {
                document.getElementById("tishi").innerHTML = "<br><font color='green'>请再次输入密码</font>";
                document.getElementById("button").disabled = true;
            }
            else if (password == repassword) {
                document.getElementById("tishi").innerHTML = "<br><font color='green'>两次密码输入一致</font>";
                document.getElementById("button").disabled = false;

            } else {
                document.getElementById("tishi").innerHTML = "<br><font color='red'>两次输入密码不一致!</font>";
                document.getElementById("button").disabled = true;
            }
        }


        function confirming() {
            var patientIdentity = document.getElementById("patientIdentity").value;
            var password1 = document.getElementById("password1").value;

            $.ajax({
                url: "/password",
                type: "POST",
                data: {
                    "patientIdentity": patientIdentity,
                    "password1": password1,
                },
                dataType: "json",
                async: true,
                success: function (data) {
                    console.log(data);
                    if (data.status == "ok") {
                        alert("重置成功")
                        sessionStorage.removeItem("tempID")
                        window.location.href = "login.html";
                    } else if (data.status == "inexistence") {
                        alert("用户不存在,请注册。")
                    } else if (data.status == "informationCheckFail") {
                        alert("您输入的信息有误！")
                    }
                },
                error: function (res) {
                    alert("请求错误！", console.res)
                }
            });
        }
    </script>
</body>

</html>